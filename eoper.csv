library(tidyverse)

# Use read_csv2 which allows read data separated by ';'
# 'dat' is the new object created
dat <- read_csv2("eoper.csv")

# Check the names of the columns and the 6 first rows
colnames(dat)
head(dat)

# Divide by 100 as we get the data in 'thousands'
dat %>% mutate(Female = Female/100, Male = Male/100, Total = Total/100) -> dat

# To get the main statistics 'mean', 'median', 'quartiles' and max-min values.
summary(dat)

# As we want to chart the evolution of both sexes to compare them in one chart we have to group
# them. This part was a contribution of http://jdieramon.github.io

gather(dat, sexo, esp_vida, Female:Male) %>% 
  arrange(Year) %>% 
  select(Year, sexo, esp_vida, Total) %>% 
  ggplot(aes(x = Year, y = esp_vida, col = sexo)) +
  geom_line() 
